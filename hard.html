<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Online Quizziz</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="start_btn"><button>Start Quiz</button></div>
    <div class="info_box">
        <div class="info-title"><span>Berikut Beberapa Aturan Kuis(HARD): </span></div>
        <div class="info-list">
            <div class="info">1. Anda hanya akan mendapatkan waktu <span>5 Detik</span> per soal(25 SOAL).</div>
            <div class="info">2. Setelah anda memilih jawaban, jawaban tersebut tidak bisa di batalkan.</div>
            <div class="info">3. Anda dapat melanjutkan soal jika aktu mati/selesai memilih jawaban.</div>
            <div class="info">4. Anda tidak bisa keluar dari kuis, jika belum menyelesaikan kuis tersebut .</div>
            <div class="info">5. Anda akan mendapatkan point, jika jawaban anda.</div>
        </div>
        <div class="buttons">
            <button class="quit">Exit Quiz</button>
            <button class="restart">Continue</button>
        </div>
    </div>

    <div class="quiz_box">
        <header>
            <div class="title">HARD</div>
            <div class="timer">
                <div class="time_left_txt">Sisa Waktu</div>
                <div class="timer_sec">05</div>
            </div>
            <div class="time_line"></div>
        </header>
        <section>
            <div class="que_text">
                <!-- memasukkan pertanyaan dari JavaScript -->
            </div>
            <div class="option_list">
                <!-- memasukkan opsi dari JavaScript -->
            </div>
        </section>

        <!-- footer of Quiz Box -->
        <footer>
            <div class="total_que">
                <!-- memasukkan Nomor Hitungan Pertanyaan dari JavaScript -->
            </div>
            <button class="next_btn">Next</button>
        </footer>
    </div>

    <!--Box Hasil Kuis -->
    <div class="result_box">
        <div class="icon">
            <i class="fas fa-crown"></i>
        </div>
        <div class="complete_text">Kamu Telah Menyelesaikan Kuis!</div>
        <div class="score_text">
            <!-- memasukkan Hasil Skor dari JavaScript -->
        </div>
        <div class="buttons">
            <button class="restart">Replay Quiz</button>
            <button class="quit">Quit Quiz</button>
        </div>
    </div>

    <script >
        let quiz = [
            {
            numb: 1,
            question: "Elemen-elemen pada bagian Head akan mengerjakan tugas-tugas berikut, KECUALI?",
            answer: "d. Memindah ke baris baru",
            options: [
            "a. Menyediakan judul dokumen",
            "b. Menjembatani hubungan antar dokumen",
            "c Menyediakan metode untuk mengirim pesan ke tipe browser",
            "d. Memindah ke baris baru"
            ]
        },
            {
            numb: 2,
            question: "Peramban web yang merupakan gagasan bagi peramban Mozila Firefox adalah pengertian dari...",
            answer: "a. Netscape Navigator",
            options: [
            "a. Netscape Navigator",
            "b. Internet Explorer",
            "c. Mozila",
            "d. Browser"
            ]
        },
            {
            numb: 3,
            question: " Atribut tag <link> yang berfungsi untuk mendefinisikan relasi terhadap sebuah dokumen dan dokumen lain yang berisi informasi tentang personil yang memberi kontribusi terhadap dokumen tersebut adalah",
            answer: "c. Rel",
            options: [
            "a. Type",
            "b. Rev",
            "c. Rel",
            "d. Href"
            ]
        },
            {
            numb: 4,
            question: " Atribut yang berfungsi untuk mengatur warna teks dokumen, dengan warna hitam sebagai warna default adalah",
            answer: "d. Text",
            options: [
            "a. Alink",
            "b. Background",
            "c. Bgcolor",
            "d. Text"
            ]
        },
            {
            numb: 5,
            question: "Atribut yang berfungsi untuk mengatur warna active link dokumen dengan default merah adalah",
            answer: "a. Alink",
            options: [
            "a. Alink",
            "b. Background",
            "c. Bgcolor",
            "d. Text",
            ]
        },
        
            {
            numb: 6,
            question: " Kode dalam halaman HTML untuk warna TEAL dan GRAY adalah",
            answer: "a. #008080 dan #808080",
            options: [
            "a. #008080 dan #808080",
            "b. #800080 dan #800000",
            "c. #808000 dan #008000",
            "d. #00ffff dan #c1c1c1"
            ]
        },
        {
            numb: 7,
            question: "Server side script biasanya hanya ada pada web ...",
            answer: "a. Dinamis",
            options: [
            "a. Dinamis",
            "b. Statis",
            "c. Program",
            "d. Database"
            ]
        },
        {
            numb: 8,
            question: "Perintah HTML untuk membuat teks berjalan adalah…",
            answer: "c. Marquee",
            options: [
            "a. Form",
            "b. Body",
            "c. Marquee",
            "d. Tr"
            ]
        },
        {
            numb: 9,
            question: "Jika kita menuliskan perintah “&copy”, maka pada html akan muncul…",
            answer: "c. ©",
            options: [
            "a. ☺",
            "b. ®",
            "c. ©",
            "d. С",
            ]
        },
        {
            numb: 10,
            question: "Saat membuat list, value DISC digunakan untuk?",
            answer: "d. Bullet Hitam",
            options: [
            "a. Bullet Kosong",
            "b. Bullet Kotak",
            "c. Bullet Segitiga",
            "d. Bullet Hitam"
            ]
        },
        {
            numb: 11,
            question: " Orang yang mengerti akan semu hal mulai dari desain, program, keamanan, penguasaan berbagai OS, dan jaringan merupakan tugas seorang…",
            answer: "d. Web Master",
            options: [
            "a. Operator",
            "b. Desainer",
            "c. Web Administrator",
            "d. Web Master"
            ]
        },
        {
            numb: 12,
            question: "Penemu dari WWW…",
            answer: "a. Tim Berners-Lee",
            options: [
            "a. Tim Berners-Lee",
            "b. NICOLAS BORG-JEFF O’HARA",
            "c. Julio-Caesar",
            "d. Steve-Job"
            ]
        },
        {
            numb: 13,
            question: "Dalam alur perkembangan aplikasi web, kegiatan untuk merumuskan tujuan dan ukuran dari aplikasi terbatas web, serta menentukan batasan system, merupakan pengertian dari…",
            answer: "b. Formulasi",
            options: [
            "a. Perencanaan",
            "b. Formulasi",
            "c. Analisis",
            "d. Perkembangan"
            ]
        },
        {
            numb: 14,
            question: "Browser pertama bernama NCSA Mosaic dikembangkan pada tahun…",
            answer: "d. 1990",
            options: [
            "a. 1999",
            "b. 1980",
            "c. 1098",
            "d. 1990"
            ]
        },
        {
            numb: 15,
            question: "Nama unik yang diberikan untuk mengidentifikasi nama server computer seperti web server atau e-mail server dijaringan internet disebut…",
            answer: "a. Nama domain",
            options: [
            "a. Nama domain",
            "b. Nama profil",
            "c. Nama e-mail",
            "d. Nama lahir"
            ]
        },
        {
            numb: 16,
            question: " Beberapa nama domain dibawah ini yang benar, kecuali…",
            answer: "a. Com, net, co",
            options: [
            "a. Com, net, co",
            "b. Co, neto, org",
            "c. Org, com, neet",
            "d. Nota, edu, mil"
            ]
        },
        {
            numb: 17,
            question: "Komputer yang bertugas menyimpan informasi halam web yang pernah di akses sebelumnya adalah...",
            answer: "b. Poxy server",
            options: [
            "a. Database server",
            "b. Poxy server",
            "c. Name server",
            "d. Router"
            ]
        },
        {
            numb: 18,
            question: " Macam-macam web server, Kecuali...",
            answer: "d. Birthttpd",
            options: [
            "a. Xitami web server",
            "b. Lighttpd",
            "c. Apache tomcat",
            "d. Birthttpd"
            ]
        },
        {
            numb: 19,
            question: "Jenis script yang pengolahannya dilakukan di sis client disebut...",
            answer: "a. Client side scripting",
            options: [
            "a. Client side scripting",
            "b. Server side scripting",
            "c. Macintosh",
            "d. A dan B benar semua"
            ]
        },
        {
            numb: 20,
            question: "Server yang dapat membuat sistem berbasis unix (seperti linux) untuk melakukan sharing resource dengan sistem berbasi windows adalah...",
            answer: "b. Samba",
            options: [
            "a. Apache",
            "b. Samba",
            "c. Squid",
            "d. Squired"
            ]
        },
        {
            numb: 21,
            question: "Web server antar platform yang dapat berjalan di beberapa platform seperti LINUX dan windows adalah...",
            answer: "b. Apache",
            options: [
            "a. Web route",
            "b. Apache",
            "c. Xampp",
            "d. Web server"
            ]
        },
        {
            numb: 22,
            question: "Dari pernyataan berikut yang tidak termasuk atribut tag audio adalah…",
            answer: "c. Sign",
            options: [
            "a. Muted",
            "b. Autoplay",
            "c. Sign",
            "d. Control"
            ]
        },
        {
            numb: 23,
            question: "Atribut yang digunakan untuk menentukan sumber berkas suara atau video adalah…",
            answer: "a. SRC",
            options: [
            "a. SRC",
            "b. LOOP",
            "c. UNITS",
            "d. AUTOPLAY"
            ]
        },
        {
            numb: 24,
            question: "Perintah <td valign=”top”>isi sel</td> berarti…",
            answer: "a. Isi sel dalam kolom menjadi rata atas",
            options: [
            "a. Isi sel dalam kolom menjadi rata atas",
            "b. Isi sel dalam baris menjadi rata atas",
            "c. Isi sel dalam kolom menjadi rata bawah",
            "d. Isi sel dalam baris menjadi rata bawah"
            ]
        },
        {
            numb: 25,
            question: "Di bawah ini contoh server side scripting adalah..",
            answer: "c. H<sup>2</sup>",
            options: [
            "a. Javas",
            "b. Javac",
            "c. Www",
            "e. Java server pages (JSP)"
            ]
        },
        ];
        //membuat variable dengan memanggil selector css pada dokumen html
        const start_btn = document.querySelector(".start_btn button");
        const info_box = document.querySelector(".info_box");
        const exit_btn = info_box.querySelector(".buttons .quit");
        const continue_btn = info_box.querySelector(".buttons .restart");
        const quiz_box = document.querySelector(".quiz_box");
        const result_box = document.querySelector(".result_box");
        const option_list = document.querySelector(".option_list");
        const time_line = document.querySelector("header .time_line");
        const timeText = document.querySelector(".timer .time_left_txt");
        const timeCount = document.querySelector(".timer .timer_sec");
        //membuat variabel untuk me randomkan soal.
        const questions= quiz.sort(function(){
            return 0.5 - Math.random();
        });

        // jika tombol startQuiz diklik
        start_btn.onclick = ()=>{
            info_box.classList.add("activeInfo"); //menampilkan info box
        }

        // jika tombol exitQuiz diklik
        exit_btn.onclick = ()=>{
            window.location.assign("index.html"); //menyembunyikan info box
        }

        // jika tombol continueQuiz diklik
        continue_btn.onclick = ()=>{
            info_box.classList.remove("activeInfo"); //menyembunyikan info box
            quiz_box.classList.add("activeQuiz"); //menampilkan quiz box
            showQuetions(0); //memanggil fungsi showQestions
            queCounter(0); //meneruskan 1 parameter ke queCounter
            startTimer(4); //memanggil fungsi startTimer
            startTimerLine(0); //memanggil fungsi startTimerLine
        }

        let timeValue =  5;
        let que_count = 0;
        let que_numb = 1;
        let userScore = 0;
        let counter;
        let counterLine;
        let widthValue = 0;

        const restart_quiz = result_box.querySelector(".buttons .restart");
        const quit_quiz = result_box.querySelector(".buttons .quit");

        //jika tombol restartQuiz diklik
        restart_quiz.onclick = ()=>{
            quiz_box.classList.add("activeQuiz"); //menampilkan quiz box
            result_box.classList.remove("activeResult"); //menyembunyikan result box
            timeValue = 5; 
            que_count = 0;
            que_numb = 1;
            userScore = 0;
            widthValue = 0;
            showQuetions(que_count); //memanggil fungsi showQestions
            queCounter(que_numb); //meneruskan nilai que_numb ke queCounter
            clearInterval(counter); //menghentikan counter
            clearInterval(counterLine); //menghentikan counterLine
            startTimer(timeValue); //memanggil fungsi startTimer
            startTimerLine(widthValue); //memanggil fungsi startTimerLine
            timeText.textContent = "Sisa Waktu"; //mengubah text dari timeText ke Time Left
            next_btn.classList.remove("show"); //menyembunyikan tombol next
        }

        // jika tombol quitQuiz di klik
        quit_quiz.onclick = ()=>{
            window.location.assign("index.html"); //memuat ulang jendela saat ini.
        }

        const next_btn = document.querySelector("footer .next_btn");
        const bottom_ques_counter = document.querySelector("footer .total_que");

        // jika tombol Next di klik
        next_btn.onclick = ()=>{
            if(que_count < questions.length - 1){ //jika jumlah pertanyaan kurang dari total panjang pertanyaan
                que_count++; //menambah nilai que_count
                que_numb++; //menambah nilai que_numb
                showQuetions(que_count); //memanggil fungsi showQestions
                queCounter(que_numb); //meneruskan nilai que_numb ke queCounter
                clearInterval(counter); //menghentikan counter
                clearInterval(counterLine); //menghentikan counterLine
                startTimer(timeValue); //memanggil fungsi startTimer
                startTimerLine(widthValue); //memanggil fungsi startTimerLine
                timeText.textContent = "Sisa Waktu"; //mengubah timeText ke Time Left
                next_btn.classList.remove("show"); //menyembunyikan tombol 
            }else{
                clearInterval(counter); //menghentikan counter
                clearInterval(counterLine); //menghentikan counterLine
                showResult(); //memanggil fungsi showResult
            }
        }

        // menampilkan pertanyaan dan opsi dari array
        function showQuetions(index){
            const que_text = document.querySelector(".que_text");

            //membuat tag span dan div baru untuk pertanyaan dan opsi serta meneruskan nilai menggunakan indeks array
            let que_tag = '<span>'+ questions[index].question +'</span>';
            let option_tag = '<div class="option"><span>'+ questions[index].options[0] +'</span></div>'
            + '<div class="option"><span>'+ questions[index].options[1] +'</span></div>'
            + '<div class="option"><span>'+ questions[index].options[2] +'</span></div>'
            + '<div class="option"><span>'+ questions[index].options[3] +'</span></div>';
            que_text.innerHTML = que_tag; //menambahkan tag span baru di dalam que_tag
            option_list.innerHTML = option_tag; //menambahkan tag div baru di dalam option_tag
            
            const option = option_list.querySelectorAll(".option");

            // mengatur onclick attribute untuk semua opsi yang tersedia 
            for(i=0; i < option.length; i++){
                option[i].setAttribute("onclick", "optionSelected(this)");
            }
        }
        // membuat tag div baru untuk ikon
        let tickIconTag = '<div class="icon tick"><i class="fas fa-check"></i></div>';
        let crossIconTag = '<div class="icon cross"><i class="fas fa-times"></i></div>';

        //jika pengguna mengklik opsi
        function optionSelected(answer){
            clearInterval(counter); //clear counter
            clearInterval(counterLine); //clear counterLine
            let userAns = answer.textContent; //mendapatkan opsi yang dipilih pengguna
            let correcAns = questions[que_count].answer; //mendapatkan jawaban yang benar dari array
            const allOptions = option_list.children.length; //mendapatkan semua item opsi
            
            if(userAns == correcAns){ //jika opsi yang dipilih pengguna sama dengan jawaban yang benar dari array
                userScore += 1; //meningkatkan nilai skor dengan 1
                answer.classList.add("correct"); //menambahkan warna hijau untuk mengoreksi opsi yang dipilih
                answer.insertAdjacentHTML("beforeend", tickIconTag); //menambahkan ikon centang untuk memperbaiki opsi yang dipilih
                console.log("Correct Answer");
                console.log("Your correct answers = " + userScore);
            }else{
                answer.classList.add("incorrect"); //menambahkan warna merah untuk memperbaiki opsi yang dipilih
                answer.insertAdjacentHTML("beforeend", crossIconTag); //menambahkan ikon silang untuk memperbaiki opsi yang dipilih
                console.log("Wrong Answer");

                for(i=0; i < allOptions; i++){
                    if(option_list.children[i].textContent == correcAns){ //jika ada opsi yang cocok dengan jawaban array
                        option_list.children[i].setAttribute("class", "option correct"); //menambahkan warna hijau ke opsi yang cocok
                        option_list.children[i].insertAdjacentHTML("beforeend", tickIconTag); //menambahkan ikon centang ke opsi yang cocok
                        console.log("Auto selected correct answer.");
                    }
                }
            }
            for(i=0; i < allOptions; i++){
                option_list.children[i].classList.add("disabled"); //setelah pengguna memilih opsi, lalu nonaktifkan semua opsi
            }
            next_btn.classList.add("show"); //tampilkan tombol berikutnya jika pengguna memilih opsi apa pun
        }

        function showResult(){
            info_box.classList.remove("activeInfo"); //sembunyikan kotak info
            quiz_box.classList.remove("activeQuiz"); //sembunyikan quiz box
            result_box.classList.add("activeResult"); //manmpilkan result box
            const scoreText = result_box.querySelector(".score_text");
            if (userScore > 20){ //jika skor pengguna lebih dari 20
                //membuat tag span baru dan meneruskan nomor skor pengguna dan total nomor pertanyaan
                let scoreTag = '<span>Selamat! 🎉, Kamu mendapatkan score <p>'+ userScore +'</p>/<p>'+ questions.length +'</p></span>';
                scoreText.innerHTML = scoreTag+'<br> NILAI : '+userScore*4+'/100';  //adding new span tag inside score_Text
            }
            else if(userScore > 15){ //jika skor pengguna lebih dari 15
                let scoreTag = '<span>nice 😎, Kamu mendapatkan score <p>'+ userScore +'</p>/<p>'+ questions.length +'</p></span>';
                scoreText.innerHTML = scoreTag+'<br> NILAI : '+userScore*4+'/100';
            }
            else{ //jika skor pengguna kurang dari 15
                let scoreTag = '<span>Maaf 😐, kamu mendapatkan score <p>'+ userScore +'</p>/<p>'+ questions.length +'</p></span>';
                scoreText.innerHTML = scoreTag+'<br> NILAI : '+userScore*4+'/100';
            }
        }

        function startTimer(time){
            counter = setInterval(timer, 1500);
            function timer(){
                timeCount.textContent = time; //mengubah nilai timeCount dengan nilai waktu
                time--; //mengurangi nilai waktu
                if(time < 9){ //jika timer kurang dari 9
                    let addZero = timeCount.textContent; 
                    timeCount.textContent = "0" + addZero; //menmabahkan "0" sebelum nilai waktu
                }
                if(time < 0){ //jika timer kurang dari 0
                    clearInterval(counter); //clear counter
                    timeText.textContent = "Waktu Habis"; //ubah teks waktu menjadi waktu habis
                    const allOptions = option_list.children.length; //mendapatkan semua item opsi
                    let correcAns = questions[que_count].answer; //mendapatkan jawaban yang benar dari array
                    for(i=0; i < allOptions; i++){
                        if(option_list.children[i].textContent == correcAns){ //jika ada opsi yang cocok dengan jawaban array
                            option_list.children[i].setAttribute("class", "option correct"); //adding green color to matched option
                            option_list.children[i].insertAdjacentHTML("beforeend", tickIconTag); //adding tick icon to matched option
                            console.log("Waktu Habis: Auto selected correct answer.");
                        }
                    }
                    for(i=0; i < allOptions; i++){
                        option_list.children[i].classList.add("disabled"); //setelah pengguna memilih opsi, lalu nonaktifkan semua opsi
                    }
                    next_btn.classList.add("show"); //tampilkan tombol berikutnya jika pengguna memilih opsi apa pun
                }
            }
        }

        function startTimerLine(time){
            counterLine = setInterval(timer, 18);
            function timer(){
                time += 1; //meningkatkan nilai waktu dengan 1
                time_line.style.width = time + "px"; //meningkatkan lebar time_line dengan px dengan nilai waktu
                if(time > 500){ //jika nilai waktu lebih besar dari 500
                    clearInterval(counterLine); //clear counterLine
                }
            }
        }
        15
        function queCounter(index){
            //membuat tag span baru dan meneruskan nomor pertanyaan dan total pertanyaan
            let totalQueCounTag = '<span><p>'+ index +'</p> DARI <p>'+ questions.length +'</p>SOAL</span>';
            bottom_ques_counter.innerHTML = totalQueCounTag;  //menambahkan tag span baru di dalam bottom_ques_counter
        }

    </script>

</body>
</html>
